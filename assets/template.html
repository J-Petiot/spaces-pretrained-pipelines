<script src="https://unpkg.com/wavesurfer.js"></script>
<script src="https://unpkg.com/wavesurfer.js/dist/plugin/wavesurfer.regions.min.js"></script>
<script src="https://unpkg.com/wavesurfer.js/dist/plugin/wavesurfer.timeline.min.js"></script>
<style>
	.legend { list-style: none; margin: 0; padding: 0}
	.legend li { float: left; margin-right: 10px; font-family : "Lato", "Trebuchet MS", Roboto, Helvetica, Arial, sans-serif; line-height: 1.8; font-size:20px;color : #444}
	.legend span { border: 1px solid #ccc; float: left; width: 30px; height: 30px; margin: 2px; }
</style>
<div style="overflow : auto"><ul class="legend" id="legend"></ul></div>
<br>
<div id="waveform"></div>
<div id="timeline"></div>
<br>
<div><button onclick="play()" id="ppb">Play</button><div>
<script type="text/javascript">
	var labels=[];
	var wavesurfer = WaveSurfer.create({
		container: '#waveform',
		barGap: 2,
		barHeight: 3,		
 		barWidth: 3,
		barRadius: 2,
		plugins: [
			WaveSurfer.regions.create({}),
			WaveSurfer.timeline.create({
				container: "#timeline",
				notchPercentHeight: 40,
				primaryColor: "#444",
				primaryFontColor: "#444"
                        })
		]
	});
	wavesurfer.load('BASE64');
	wavesurfer.on('ready', function () {
		wavesurfer.play(); 
	});
	wavesurfer.on('play',function() {
		document.getElementById('ppb').innerHTML = "Pause";
	});
	wavesurfer.on('pause',function() {
		document.getElementById('ppb').innerHTML = "Play";
	});
	REGIONS
	document.addEventListener('keyup', event => {
		if (event.code === 'Space') {
			play();
		}
	})
	function play(){
		wavesurfer.isPlaying() ? wavesurfer.pause() : wavesurfer.play();
	}
	function addLegend(label, color){
		if(! labels.includes(label)){
			labels.push(label);
			var ul = document.getElementById("legend");
			var span = document.createElement("span");
			span.style.backgroundColor = color;
			var li = document.createElement("li");
			li.appendChild(span);
			li.appendChild(document.createTextNode(label));
			ul.appendChild(li);
		}
	}
</script>
